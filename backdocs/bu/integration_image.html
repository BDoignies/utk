<html>
	<head>
		<title>UTK</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<script src="assets/js/highlight/highlight.pack.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
	</head>
	<body>
<div id="page-wrapper">

				<div id="header">
						
						<h1>
							<img class="mylogo" height="60" src="data/logo_utk.jpg" alt="Logo"/>
							<a style="color:inherit;" href="index.html" id="logo"> Uni{corn|form} Tool Kit</a>
							<a href="https://github.com/utk-team/utk"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>
						</h1>
						
						
						<nav id="nav">
							<ul>
								<li><a href="index.html">Home</a></li>
								<li>
									<a href="basicclasses.html">Basic Classes</a>
									<ul>
										<li><a target="_blank" href="doxygen/html/annotated.html">Doxygen</a></li>
										<li><a href="io_format.html">I/O Formats</a>
												<ul>
												<li><a href="io_ascii.html">ASCII</a>
													<ul>
														<li><a href="io_dat.html">.dat</a></li>
														<li><a href="io_edat.html">.edat</a></li>
													</ul>
												</li>
												<li><a href="io_binary.html">Binary</a>
													<ul>
														<li><a href="io_bin.html">.bin</a></li>
														<li><a href="io_ebin.html">.ebin</a></li>
													</ul>
												</li>
												<li><a href="io_graphic.html">Graphic</a>
													<ul>
														<li><a href="wip.html" style="color:black">.png</a></li>
														<li><a href="io_ps.html">.ps</a></li>
														<li><a href="io_tikz.html">.tex (tikz)</a></li>
													</ul>
												</li>
											</ul>
										</li>
									</ul>
								</li>
								
								<li>
									<a href="samplers.html">Samplers</a>
									<ul>
										<li>
											<a href="sampler_lowdisc.html">Low Discrepancy</a>
											<ul>
												<li><a href="sampler_faure.html">Faure</a></li>
												<li><a href="sampler_halton.html">Halton</a></li>
												<li><a href="sampler_hammersley.html">Hammersley</a></li>
												<li><a href="sampler_ldbn.html">LDBN</a></li>
												<li><a href="sampler_BNLDS.html">Projection scrambling</a></li>
												<li><a href="sampler_niederreiter.html">Niederreiter</a></li>
												<li><a href="sampler_owen.html">Owen</a></li>
												<li><a href="sampler_sobolkuo.html">Sobol</a></li>
												<li><a href="sampler_sobolindiced.html">Sobol Indiced</a></li>
											</ul>
										</li>
										<li>
											<a href="sampler_bn_poisson.html">Blue Noise / Poisson</a>
											<ul>
												<li><a href="sampler_aapatterns.html">AA Patterns</a></li>
												<li><a href="sampler_art.html">ART</a></li>
												<li><a href="sampler_CVT.html">CVT</a></li>
												<li><a href="sampler_CapCVT.html">CapCVT</a></li>
												<li><a href="sampler_dart_throwing.html">Dart Throwing</a></li>
												<li><a href="sampler_fastpoisson.html">Fast Poisson</a></li>
												<li><a href="sampler_forced_random.html">Forced Random</a></li>
												<li><a href="sampler_FPO.html">FPO</a></li>
												<li><a href="sampler_ldbn.html">LDBN</a></li>
												<li><a href="sampler_penrose.html">Penrose</a></li>
												<li><a href="sampler_BNOT.html">BNOT</li>
											</ul>
										</li>
										<li>
											<a href="sampler_other.html">Other</a>
											<ul>
												<li><a href="sampler_cmj.html">CMJ</a></li>
												<li><a href="sampler_hexagonal_grid.html">Hexagonal Grid</a></li>
												<li><a href="sampler_korobov.html">Korobov</a></li>
												<li><a href="sampler_multijitter.html">Multi Jitter</a></li>
												<li><a href="sampler_nrooks.html">N-Rooks</a></li>
												<li><a href="sampler_rank1.html">Rank 1</a></li>
												<li><a href="sampler_regular_grid.html">Regular Grid</a></li>
												<li><a href="sampler_singlepeak.html">Single Peak</a></li>
												<li><a href="sampler_step.html">Step</a></li>
												<li><a href="sampler_stratified.html">Stratified</a></li>
												<li><a href="sampler_whitenoise.html">Whitenoise</a></li>
											</ul>
										</li>
										<li>
											<a href="sampler_experimental.html">Experimental</a>
											<ul>
												<li><a href="sampler_exhaustive_owen.html">Exhaustive Owen</a></li>
												<li><a href="sampler_genetic_owen.html">Genetic Owen</a></li>
												<li><a href="sampler_gradient_descent.html">Gradient descent</a></li>
											</ul>
										</li>
									</ul>
								</li>
								<li>
									<a href="scrambling.html">Scrambling</a>
									<ul>
										<li><a href="scrambling_cranleypatterson.html">Cranley Patterson</a></li>
										<li><a href="scrambling_digitalxor.html">Digital XOR</a></li>
										<li><a href="scrambling_owen.html">Owen Scrambling</a></li>
									</ul>
								</li>
								
								<li>
									<a href="integration.html">Integration</a>
									<ul>
										<li><a href="integration_n-Sphere.html">NSpheres</a></li>
										<li><a href="integration_centered_gaussian.html">Centered Gaussian</a></li>
										<li><a href="integration_cornered_gaussian.html">Cornered Gaussian</a></li>
										<li><a href="integration_gaussian.html">Gaussian</a></li>
										<li><a href="integration_image.html">Image</a></li>
										<li><a href="integration_box_arrangement.html">Box Arrangement</a></li>
										<li><a href="integration_triangle_arrangement.html">Triangle Arrangement</a></li>
									</ul>
								</li>
								
								<li>
									<a href="discrepancy.html">Discrepancy</a>
									<ul>
										<li><a href="discrepancy_star_disc.html">Linf</a></li>
										<li><a href="discrepancy_l2_disc.html">L2</a></li>
										<li><a href="discrepancy_generalized_l2_disc.html">Generalized L2</a></li>
										<li><a href="discrepancy_centered_l2_disc.html">Centered L2</a></li>
										<li><a href="discrepancy_unanchored_l2_disc.html">Unanchored L2</a></li>
										<li><a href="discrepancy_symmetric_l2_disc.html">Symmetric L2</a></li>
										<li><a href="discrepancy_boundaries_linf_disc.html">Boundaries Linf</a></li>
									</ul>
								</li>
								
								<li>
									<a href="spectral.html">Spectral</a>
									<ul>
										<li><a href="spectral_fourier.html">Fourier spectrum</a></li>
									</ul>
								</li>
								<li>
									<a href="stats.html">Statistics</a>
									<ul>
										<li><a href="stats_PCF.html">PCF</a></li>
										<li><a href="stats_minDist.html">Minimum Distance</a></li>
									</ul>
								</li>
								<li>
									<a href="rendering.html">Rendering</a>
									<ul>
										<li><a href="rendering_zoneplate.html">Zoneplate</a></li>
										<li><a href="wip.html" style="color:black">Ray Tracing</a></li>
									</ul>
								</li>
								
								
								<li>
									<a href="utils.html">Misc</a>
									<ul>
										<li><a href="utils_histogram_compare.html">Histograms compare</a></li>
										<li><a href="utils_draw_pointset.html">Draw pointset</a></li>
									</ul>
								</li>

								<li>
									<a href="scripts.html">Scripts</a>
									<ul>
										<li><a href="scripts_discrepancy_graph.html">Discrepancy graph</a></li>
										<li><a href="scripts_integration_graph.html">Integration graph</a></li>
										<li><a href="scripts_plot_radial.html">Plot Radial</a></li>
										<li><a href="scripts_plot_pcf.html">Plot PCF</a></li>
									</ul>
								</li>
								
								
							</ul>
						</nav>

				</div>
		</div>
<div id="post">
			<h2> Integration Image </h2>
			<table class=files>
			<tr>
				<td class=files valign=middle>Files</td>
				<td class=files valign=middle>
					src/integration/IntegrationImage.hpp<br/>
					src/bin/integration/IntegrationImage_fromfile_2dd.cpp.cpp
				</td>
			</tr>
			</table>

			<h1>Description</h1>
			<p>
			This test uses an input pointset to approximate the integration of an image using a Monte Carlo estimator.
			Note that since there are no analytical function for this integration, we define this analytical function as
			the sum of the values of all pixels of the image. We usually integrate over HDR images.
			This test exists only in 2D.
		    </p>

		    <h1> Execution </h1>

		    <p>
				Parameters:<br/>
				<pre>
	[HELP]
	--image [string]	The image to integrate
	-h [string]		Displays this help message
	-i [string]		The input pointsets
	-o [string]		The output integration results
	-s [uint]		The number of samples to read (if integrating from a sequence)
	--silent 		Silent mode
	--brute 		Output brute values instead of computing the statistics
			</pre>
			</p>

			<p>To integrate over a function using an input 2D point set, we can use the following
			client line command:
			<pre><cli>
./bin/integration/IntegrationImage2D_fromfile_2dd --image ../../data/HDR/HDRimage1600x1600_017.exr -i toto.dat
			</cli></pre>
			</p>

			<p>
			Or one can use the following C++ code:
			<pre><code>
<b>IntegrationImage</b> integration_test;
<b>IntegrationStatistics</b> stats;
<b>Pointset< D, double, Point<D, double> ></b> pts;
integration_test.setImage("../../data/HDR/HDRimage1600x1600_017.exr");

//We assume pts is filled
stats.nbpts = pts.size();

//Can be done several times if we need to average over
//several stochastic pointsets
<b>double</b> analytical = 0;
<b>double</b> integration = 0;
integration_test.compute< D, double, Point<D, double> >(pts, integration, analytical)
stats.setAnalytical(analytical);
stats.addValue(integration);

stats.computeStatistics();
std::cout << stats << std::endl;
			</code></pre>
			</p>

			<h1> Results </h1>

Stochastic sampler
<pre><cli>./bin/integration/IntegrationImage2D_fromfile_2dd --image ../../data/HDR/HDRimage1600x1600_017.exr -i stratified_256.dat
#Nbpts	#Mean		#Var		#Min		#Max		#Analytical	#MSE		#NbPtsets
256	0.00526645	5.08625e-08	0.00490972	0.00564206	0.00532679	4.94174e-08	10
</pre></cli>
<p align="center">
<a href="data/image/integration_1_256.png"><img class="mylogo" width="256" src="data/image/integration_1_256.png"></a>
<a href="data/image/integration_2_256.png"><img class="mylogo" width="256" src="data/image/integration_2_256.png"></a>
<a href="data/image/integration_3_256.png"><img class="mylogo" width="256" src="data/image/integration_3_256.png"></a>
 ... </p>
<pre><cli>./bin/integration/IntegrationImage2D_fromfile_2dd --image ../../data/HDR/HDRimage1600x1600_017.exr -i stratified_1024.dat
#Nbpts	#Mean		#Var		#Min		#Max		#Analytical	#MSE		#NbPtsets
1024	0.00533107	7.88106e-09	0.00521723	0.0054546	0.00532679	7.1113e-09	10
</pre></cli>
<p align="center">
<a href="data/image/integration_1_1024.png"><img class="mylogo" width="256" src="data/image/integration_1_1024.png"></a>
<a href="data/image/integration_2_1024.png"><img class="mylogo" width="256" src="data/image/integration_2_1024.png"></a>
<a href="data/image/integration_3_1024.png"><img class="mylogo" width="256" src="data/image/integration_3_1024.png"></a>
 ... </p>
<pre><cli>./bin/integration/IntegrationImage2D_fromfile_2dd --image ../../data/HDR/HDRimage1600x1600_017.exr -i stratified_4096.dat
#Nbpts	#Mean		#Var		#Min		#Max		#Analytical	#MSE		#NbPtsets
4096	0.00532906	7.15467e-10	0.00527126	0.00536509	0.00532679	6.49065e-10	10
</pre></cli>
<p align="center">
<a href="data/image/integration_1_4096.png"><img class="mylogo" width="256" src="data/image/integration_1_4096.png"></a>
<a href="data/image/integration_2_4096.png"><img class="mylogo" width="256" src="data/image/integration_2_4096.png"></a>
<a href="data/image/integration_3_4096.png"><img class="mylogo" width="256" src="data/image/integration_3_4096.png"></a>
 ... </p>
Deterministic sampler
<pre><cli>./bin/integration/IntegrationImage2D_fromfile_2dd --image ../../data/HDR/HDRimage1600x1600_017.exr -i sobol_1024.dat
#Nbpts	#Mean		#Var	#Min		#Max		#Analytical	#MSE		#NbPtsets
1024	0.00531459	0	0.00531459	0.00531459	0.00532679	1.48854e-10	1
</pre></cli>
<p align="center"><a href="data/image/integration_1024.png"><img class="mylogo" width="256" src="data/image/integration_1024.png"></a><p>
<pre><cli>./bin/integration/IntegrationImage2D_fromfile_2dd --image ../../data/HDR/HDRimage1600x1600_017.exr -i sobol_4096.dat
#Nbpts	#Mean		#Var	#Min		#Max		#Analytical	#MSE		#NbPtsets
4096	0.00531362	0	0.00531362	0.00531362	0.00532679	1.73295e-10	1
</pre></cli>
<p align="center"><a href="data/image/integration_4096.png"><img class="mylogo" width="256" src="data/image/integration_4096.png"></a><p>
<!-- Footer -->
		<div id="page-wrapper">
				<div id="footer">
					<!-- Icons -->
						<ul class="icons">
							<li><a href="https://github.com/utk-team/utk"><img src="https://assets-cdn.github.com/favicon.ico" alt="Github"/></a></li>
							<li><img src="https://travis-ci.org/utk-team/utk.svg?branch=master" alt="Travis Build"/></li>
						<ul>

					<!-- Copyright -->
						<div class="copyright">
							<ul class="menu">
								<li>&copy; Untitled. All rights reserved</li>
								<li>Design: <a style="font-size:80%" href="http://html5up.net"> HTML5 UP </a></li>
							</ul>
						</div>
				</div>
		</div>

			<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>
